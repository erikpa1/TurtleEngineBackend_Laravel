import{R as r,j as e,b as s,M as p,aW as T,c as m,a3 as v}from"./index-bbd1ebcb.js";import{u as C}from"./assets_hooks-1bb9fe8a.js";function w({asset:n}){const[a,i]=r.useState([n]);function t(){i([n])}return e.jsx(s.Row,{children:e.jsx(S,{asset:a,onFullRefresh:t})})}function S({asset:n,onFullRefresh:a}){const t=n[0].data,[o,u]=r.useState(t.tasks);function c(){u([...t.tasks])}return e.jsx(s.Card,{style:{backgroundColor:s.Colors.WhiteMiddle},children:e.jsx(s.CardContent,{children:e.jsxs(s.Stack,{gap:3,children:[e.jsx(j,{index:0,taskset:t,onRefresh:c}),t.tasks.map((d,x)=>e.jsxs(r.Fragment,{children:[e.jsx(_,{index:x,item:d,onFullRefresh:c}),e.jsx(j,{index:x+1,taskset:t,onRefresh:c})]},d.uid))]})})})}function j({index:n,taskset:a,onRefresh:i}){function t(){const o=new T;a.tasks.splice(n,0,o),i()}return e.jsx(s.IconClickButton,{image:"/icons/Add.svg",onClick:t,style:{marginLeft:"auto",marginRight:"auto"}})}function _({item:n,index:a,onFullRefresh:i}){const[t]=s.T(),[o,u]=r.useState(n.name),[c,d]=r.useState(n.text);function x(){}function g(){}function h(){const l=n._parent;l.tasks=l.tasks.filter(f=>f!==n),i()}function k(){p.showYesNoModal({lang:"question.delete.task",onYes:h})}return e.jsx(s.Stack,{gap:3,children:e.jsx(s.Card,{style:{margin:"0.1em",padding:"0.5em"},children:e.jsxs(s.Stack,{direction:"horizontal",gap:3,children:[e.jsxs("div",{children:[a+1,"."]}),e.jsxs(s.TextMicro,{children:[t("name"),":"]}),e.jsx("input",{value:o,onChange:l=>{n.name=l.target.value,u(n.name)}}),e.jsxs(s.TextMicro,{children:[t("lang"),":"]}),e.jsx("input",{value:c,onChange:l=>{n.name=l.target.value,d(n.name)}}),e.jsxs(s.Stack,{direction:"horizontal",style:{marginLeft:"auto"},gap:1,children:[e.jsx(s.IconClickButton,{onClick:x,image:"/icons/Arrow.Up.svg"}),e.jsx(s.IconClickButton,{onClick:g,image:"/icons/Arrow.Down.svg"}),e.jsx(s.IconClickButton,{onClick:k,image:"/icons/Delete.svg"})]})]})})})}function b({asset:n,forceLang:a}){return r.useState("en"),e.jsx(s.Stack,{children:"Here"})}function y({}){const n=C();return n?e.jsx(A,{asset:n}):e.jsx(s.MiddleSpinner,{})}function A({asset:n}){s.T();const a=m(),[i,t]=r.useState("edit");async function o(){a.lock(),await v.UploadAssetData(n.parent_project_uid,n.uid,n.data),a.unlock()}return e.jsxs(s.ViewContainer,{children:[e.jsx(s.Button,{label:"save",onClick:o}),e.jsxs(s.Stack,{gap:3,children:[e.jsx(s.Card,{children:e.jsxs(s.Tabs,{value:i,onChange:(u,c)=>t(c),centered:!0,children:[e.jsx(s.Tab,{label:"edit",value:"edit"}),e.jsx(s.Tab,{label:"view",value:"view"})]})}),e.jsxs(s.Switch,{condition:i,children:[e.jsx(s.Case,{value:"edit",children:e.jsx(w,{asset:n})}),e.jsx(s.Case,{value:"view",children:e.jsx(L,{asset:n})})]})]})]})}function L({asset:n}){const[a,i]=r.useState("en");return e.jsxs(e.Fragment,{children:[e.jsx(s.Card,{children:e.jsxs(s.Tabs,{value:a,onChange:(t,o)=>i(o),centered:!0,children:[e.jsx(s.Tab,{label:"en",value:"en"}),e.jsx(s.Tab,{label:"cz",value:"cz"})]})}),e.jsx(b,{asset:n,forceLang:a})]})}export{y as default};
