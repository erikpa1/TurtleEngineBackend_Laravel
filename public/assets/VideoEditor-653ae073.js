import{j as e,V as j,b as n,F as u,R as d,c as x,P as c,z as p,a3 as C}from"./index-bbd1ebcb.js";import{I as g}from"./ImagesApi-25c337aa.js";import{u as m}from"./assets_hooks-1bb9fe8a.js";function D({}){const t=m();return t?e.jsx(j,{children:e.jsx(P,{asset:t})}):e.jsx(n.MiddleSpinner,{})}function P({asset:t}){const o=t.data;return e.jsxs("div",{className:"vstack gap-3",children:[e.jsx(k,{asset:t}),e.jsxs(n.Card,{children:[e.jsx(n.CardContent,{style:{height:"650px"},children:e.jsx("video",{id:"video-editor-player-guis",controls:!0,width:"100%",height:"100%",style:{backgroundColor:"black"},children:e.jsx("source",{src:u.ConvertFilePath(o.GetEntryPath()),type:"video/mp4"})})}),e.jsx(v,{asset:t,assetData:o})]}),e.jsx(R,{})]})}function k({asset:t}){const[o,r]=d.useState(Math.random());function s(){r(Math.random())}return e.jsxs(n.Card,{style:{width:"400px"},children:[e.jsx(n.CardMedia,{sx:{height:140},image:u.ConvertFilePathRnd(t.GetPreviewPath())}),e.jsx(n.CardContent,{children:e.jsx(n.Typography,{gutterBottom:!0,variant:"h5",component:"div",children:t.name})}),e.jsx(y,{asset:t,onRefresh:s})]})}function v({asset:t,assetData:o}){return d.useRef(),e.jsx(n.CardActions,{children:e.jsx(F,{asset:t,assetData:o})})}function y({asset:t,onRefresh:o}){const r=x(),s=d.useRef();async function l(){if(r.lock(),c.IsDesktop()){const a=await c.OpenAnySingleFileDialog("Image","png");if(a!==""){const i=`${t.GetFolderPath()}/Preview.png`;await g.GeneratePreviewDesktop(a,i,512)}r.unlock(),o()}else s.current.click()}return e.jsxs(n.CardActions,{children:[e.jsx(n.Button,{label:"upload.snapshot",onClick:l}),e.jsx("input",{ref:s,onChange:l,type:"file",hidden:!0})]})}function F({asset:t,assetData:o}){const r=x(),s=d.useRef();async function l(i){const f=`${t.GetFolderPath()}Default.${o.video_extension}`;await p.DeleteFile(f),o.video_extension=u.GetFileExtension(i);const h=`${t.GetFolderPath()}Default.${o.video_extension}`;console.log(`Copying from: ${i}`),console.log(`To: ${h}`),Promise.all([p.CopyFile(i,h),C.UploadAssetData(t.parent_project_uid,t.uid,o)])}function a(){r.lock(),c.IsDesktop()?c.OpenAnySingleFileDialog("Video","mp4").then(i=>{l(i).then(()=>{r.unlock()})}):s.current.click()}return e.jsxs(e.Fragment,{children:[e.jsx(n.Button,{label:"replace",onClick:a}),e.jsx("input",{ref:s,onChange:a,type:"file",hidden:!0})]})}function R({}){return e.jsx(n.Card,{children:e.jsx(n.CardContent,{children:"a B C D"})})}export{D as default};
